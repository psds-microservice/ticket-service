syntax = "proto3";
package ticket_service;
option go_package = "github.com/psds-microservice/ticket-service/pkg/gen/ticket_service;ticket_service";
import "google/protobuf/timestamp.proto";
import "google/api/annotations.proto";

service TicketService {
  rpc CreateTicket (CreateTicketRequest) returns (Ticket) {
    option (google.api.http) = { post: "/api/v1/tickets"; body: "*" }; }
  rpc GetTicket (GetTicketRequest) returns (Ticket) {
    option (google.api.http) = { get: "/api/v1/tickets/{id}" }; }
  rpc ListTickets (ListTicketsRequest) returns (ListTicketsResponse) {
    option (google.api.http) = { get: "/api/v1/tickets" }; }
  rpc UpdateTicket (UpdateTicketRequest) returns (Ticket) {
    option (google.api.http) = { put: "/api/v1/tickets/{id}"; body: "*" }; }
}

message CreateTicketRequest { string subject = 1; string body = 2; string session_id = 3; string operator_id = 4; }
message GetTicketRequest { int64 id = 1; }
message ListTicketsRequest { int32 limit = 1; int32 offset = 2; }
message UpdateTicketRequest { int64 id = 1; string subject = 2; string body = 3; string status = 4; }
message Ticket { int64 id = 1; string subject = 2; string body = 3; string session_id = 4; string operator_id = 5; string status = 6; google.protobuf.Timestamp created_at = 7; google.protobuf.Timestamp updated_at = 8; }
message ListTicketsResponse { repeated Ticket tickets = 1; int32 total = 2; }
